<!-- index.html -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Index Page</title>
</head>
<body>


<h1>User List</h1>
<ul>
    <li th:each="user : ${users}">
        <a th:href="@{'/chat/' + ${userId}  + '/' + ${user.id}}" th:text="${user.name}"></a>
    </li>
</ul>

<h1>Chat Room List</h1>
<ul>
    <li th:each="chatRoom : ${chatRooms}">
        <a th:href="@{'/chat/' + ${userId} + '/chat/' + ${chatRoom.id}}" th:text="${chatRoom.name}"></a>
    </li>
</ul>

<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script>
    const socket = new SockJS('/ws');
    const stompClient = Stomp.over(socket);
    stompClient.connect({}, function(frame) {
        console.log('Connected: ' + frame);
    });

    window.onbeforeunload = function() {
        stompClient.disconnect();
    };
</script>

</body>
</html>
